<?xml version="1.0" encoding="UTF-8"?>

<?import com.jfoenix.controls.JFXButton?>
<?import com.jfoenix.controls.JFXTextArea?>
<?import com.jfoenix.controls.JFXTextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="context" styleClass="background-modern" xmlns="http://javafx.com/javafx/20.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.devstack.pos.controller.ProductMainPageController" stylesheets="@styles/pos-styles.css">
   <children>
      <!-- Header Bar -->
      <VBox styleClass="header-bar" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="12">
               <Text styleClass="header-title" text="Product Management">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Text>
               <Region HBox.hgrow="ALWAYS" />
               <JFXButton onAction="#btnBackToHomeOnAction" text="Back to Dashboard" buttonType="RAISED" styleClass="btn-secondary" prefWidth="160.0">
                  <font>
                     <Font name="System Bold" size="13.0" />
                  </font>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </JFXButton>
            </HBox>
         </children>
      </VBox>
      
      <!-- Main Content -->
      <HBox spacing="24" style="-fx-padding: 32;" AnchorPane.topAnchor="72" AnchorPane.leftAnchor="32" AnchorPane.rightAnchor="32" AnchorPane.bottomAnchor="32">
         <!-- Left Panel - Product Form -->
         <VBox spacing="20" styleClass="form-section" prefWidth="450.0">
            <Text text="Product Details" styleClass="label-section">
               <font>
                  <Font name="System Bold" size="20.0" />
               </font>
            </Text>
            
            <VBox spacing="16">
               <HBox spacing="12" alignment="CENTER_LEFT">
                  <VBox spacing="8" HBox.hgrow="ALWAYS">
                     <Text text="Barcode (Scan or Enter)" styleClass="form-label">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     <JFXTextField fx:id="txtBarcode" promptText="Scan barcode or enter manually" styleClass="text-field-modern">
                        <font>
                           <Font name="System" size="14.0" />
                        </font>
                     </JFXTextField>
                  </VBox>
                  <JFXButton onAction="#btnAddNewOnAction" text="+ New Product" buttonType="RAISED" styleClass="btn-primary" prefWidth="140.0" style="-fx-margin-top: 28;">
                     <font>
                        <Font name="System Bold" size="13.0" />
                     </font>
                     <cursor>
                        <Cursor fx:constant="HAND" />
                     </cursor>
                  </JFXButton>
               </HBox>
               
               <VBox spacing="8">
                  <HBox alignment="CENTER_LEFT" spacing="8">
                     <Text text="Category" styleClass="form-label">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     <Region HBox.hgrow="ALWAYS" />
                     <JFXButton onAction="#btnManageCategoriesOnAction" text="+ Manage" 
                                style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-size: 11px; -fx-padding: 4 12;">
                        <cursor>
                           <Cursor fx:constant="HAND" />
                        </cursor>
                     </JFXButton>
                  </HBox>
                  <ComboBox fx:id="cmbCategory" promptText="Select Category" styleClass="combo-box-modern" maxWidth="Infinity">
                     <cursor>
                        <Cursor fx:constant="HAND" />
                     </cursor>
                  </ComboBox>
               </VBox>
               
               <VBox spacing="8">
                  <Text text="Description" styleClass="form-label">
                     <font>
                        <Font name="System Bold" size="14.0" />
                     </font>
                  </Text>
                  <TextArea fx:id="txtProductDescription" promptText="Enter product description" styleClass="text-field-modern" prefHeight="100.0" wrapText="true">
                     <font>
                        <Font name="System" size="14.0" />
                     </font>
                  </TextArea>
               </VBox>
               
               <VBox spacing="8" fx:id="barcodeImageContainer" visible="false" managed="false">
                  <Text text="Generated Barcode" styleClass="form-label">
                     <font>
                        <Font name="System Bold" size="14.0" />
                     </font>
                  </Text>
                  <javafx.scene.image.ImageView fx:id="imgBarcode" fitWidth="300.0" preserveRatio="true" />
               </VBox>
               
               <HBox spacing="12">
                  <JFXButton fx:id="btnGenerateBarcode" onAction="#btnGenerateBarcodeOnAction" text="Preview Barcode" buttonType="RAISED" styleClass="btn-secondary" prefHeight="40.0" HBox.hgrow="ALWAYS">
                     <font>
                        <Font name="System Bold" size="13.0" />
                     </font>
                     <cursor>
                        <Cursor fx:constant="HAND" />
                     </cursor>
                  </JFXButton>
                  <JFXButton onAction="#btnClearBarcodeOnAction" text="Clear" buttonType="RAISED" styleClass="btn-secondary" prefHeight="40.0" prefWidth="100.0">
                     <font>
                        <Font name="System Bold" size="13.0" />
                     </font>
                     <cursor>
                        <Cursor fx:constant="HAND" />
                     </cursor>
                  </JFXButton>
               </HBox>
               
               <JFXButton fx:id="btnSaveUpdate" onAction="#btnNewProductOnAction" text="Save Product" buttonType="RAISED" styleClass="btn-success" prefHeight="44.0" maxWidth="Infinity">
                  <font>
                     <Font name="System Bold" size="14.0" />
                  </font>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </JFXButton>
               
            </VBox>
               </VBox>
               
        <!-- Right Panel - Product List and Selected Product Summary -->
        <ScrollPane fitToWidth="true" HBox.hgrow="ALWAYS" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER" style="-fx-background-color: transparent;">
           <content>
              <VBox spacing="24" styleClass="form-section" style="-fx-padding: 0 8 24 8;">
                 <!-- Product List Section -->
               <VBox spacing="12">
               <HBox alignment="CENTER_LEFT" spacing="12">
                  <Text text="Product List" styleClass="label-section">
                     <font>
                        <Font name="System Bold" size="18.0" />
                  </font>
               </Text>
               <Region HBox.hgrow="ALWAYS" />
                  <VBox spacing="8">
                     <Text text="Search Products" styleClass="form-label" style="-fx-font-size: 12px;">
                        <font>
                           <Font name="System Bold" size="12.0" />
                        </font>
                     </Text>
                     <JFXTextField fx:id="txtSearchProducts" promptText="Search Products..." styleClass="text-field-modern" prefWidth="200.0">
                        <font>
                           <Font name="System" size="14.0" />
                        </font>
                     </JFXTextField>
                  </VBox>
               </HBox>
              <TableView fx:id="tbl" styleClass="table-view-modern" prefHeight="420.0" minHeight="360.0">
                     <columns>
                     <TableColumn fx:id="colProductBarcode" prefWidth="110.0" minWidth="100.0" text="Barcode" />
                     <TableColumn fx:id="colProductDesc" prefWidth="140.0" minWidth="120.0" text="Description" />
                     <TableColumn fx:id="colProductCategory" prefWidth="90.0" minWidth="80.0" text="Category" />
                    <TableColumn fx:id="colProductViewBarcode" prefWidth="100.0" minWidth="90.0" text="View Barcode" />
                    <TableColumn fx:id="colProductDelete" prefWidth="70.0" minWidth="60.0" text="Delete" />
                     </columns>
                  </TableView>
                 </VBox>

                 <!-- Selected Product Summary -->
                 <VBox spacing="14" style="-fx-background-color: white; -fx-padding: 18; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 2);" minHeight="150.0">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                       <Text text="Selected Product" styleClass="label-section" style="-fx-font-size: 18px; -fx-fill: #34495e;">
                          <font>
                             <Font name="System Bold" size="18.0" />
                          </font>
                       </Text>
                       <Region HBox.hgrow="ALWAYS" />
                       <JFXButton fx:id="btnNewBatch" onAction="#newBatchOnAction" text="+ New Batch" buttonType="RAISED" styleClass="btn-primary" prefWidth="150.0" prefHeight="42.0" disable="true" style="-fx-font-size: 14px;">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                          <cursor>
                             <Cursor fx:constant="HAND" />
                          </cursor>
                       </JFXButton>
                    </HBox>
                    <Separator />
                    <GridPane hgap="18" vgap="14">
                       <columnConstraints>
                          <ColumnConstraints prefWidth="130.0" halignment="RIGHT" />
                          <ColumnConstraints hgrow="ALWAYS" />
                       </columnConstraints>
                       
                       <rowConstraints>
                          <RowConstraints minHeight="40.0" vgrow="NEVER" />
                          <RowConstraints minHeight="70.0" vgrow="NEVER" />
                       </rowConstraints>
                       
                       <Text text="Product Code" GridPane.rowIndex="0" style="-fx-font-size: 13px; -fx-fill: #7f8c8d; -fx-font-weight: bold;" />
                       <JFXTextField fx:id="txtSelectedProdId" editable="false" promptText="Not selected" styleClass="text-field-modern" style="-fx-font-size: 16px; -fx-font-weight: bold;" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                       
                       <Text text="Description" GridPane.rowIndex="1" style="-fx-font-size: 13px; -fx-fill: #7f8c8d; -fx-font-weight: bold;" />
                       <TextArea fx:id="txtSelectedProdDescription" editable="false" promptText="Select a product from the list above..." styleClass="text-field-modern" prefHeight="68.0" wrapText="true" style="-fx-font-size: 15px;" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    </GridPane>
                  </VBox>
               
                 <!-- Batch Details Table -->
                 <VBox spacing="12" style="-fx-background-color: white; -fx-padding: 18; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 2);">
                    <Text text="Batch Details" styleClass="label-section" style="-fx-font-size: 18px; -fx-fill: #34495e;">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                    <ScrollPane fx:id="scrollPaneBatchDetails" fitToWidth="true" prefHeight="300.0" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER" style="-fx-background-color: transparent;">
                       <content>
                          <TableView fx:id="tblDetail" styleClass="table-view-modern" prefHeight="280.0">
                     <columns>
                                <TableColumn fx:id="colPDId" prefWidth="100.0" text="Batch Code" />
                                <TableColumn fx:id="colPDQty" prefWidth="80.0" text="Quantity" />
                                <TableColumn fx:id="colPDBuyingPrice" prefWidth="100.0" text="Buying Price" />
                                <TableColumn fx:id="colPDSellingPrice" prefWidth="100.0" text="Selling Price" />
                                <!-- <TableColumn fx:id="colPDShowPrice" prefWidth="100.0" text="Show Price" /> -->
                                <TableColumn fx:id="colPDSupplierName" prefWidth="120.0" text="Supplier Name" />
                                <TableColumn fx:id="colPDDAvailability" prefWidth="100.0" text="Discount" />
                                <TableColumn fx:id="colPDViewBarcode" prefWidth="90.0" text="View Barcode" />
                                <TableColumn fx:id="colPDDelete" prefWidth="100.0" text="Delete" />
                     </columns>
                  </TableView>
                       </content>
                    </ScrollPane>
               </VBox>
            </VBox>
           </content>
        </ScrollPane>
      </HBox>
   </children>
</AnchorPane>
