<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<AnchorPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.devstack.pos.controller.PlaceOrderFormController"
            fx:id="context"  prefHeight="750" prefWidth="1200"
            style="-fx-background-color: #ECEFF1;">

   <HBox AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" spacing="20" style="-fx-padding: 20;">

      <VBox HBox.hgrow="ALWAYS" spacing="20" prefWidth="700">

         <VBox spacing="10" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 4);">
            <Label text="ðŸ‘¤ Customer Information" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #37474F;">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Separator/>
            <GridPane hgap="15" vgap="10">
               <columnConstraints>
                  <ColumnConstraints percentWidth="15" halignment="LEFT" />
                  <ColumnConstraints percentWidth="40" hgrow="ALWAYS" />
                  <ColumnConstraints percentWidth="45" hgrow="ALWAYS" />
               </columnConstraints>

               <Label text="Email:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtEmail" promptText="Enter email or search key" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.columnSpan="2"/>

               <Label text="Name:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtName" promptText="Enter Customer Name" editable="true" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

               <Label text="Contact:" GridPane.rowIndex="1" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtContact" promptText="Enter Contact No" editable="true" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;"/>

               <Hyperlink fx:id="urlNewLoyalty" text="âž• Register New Loyalty Customer" visible="false" onAction="#newLoyaltyOnAction" GridPane.rowIndex="2" GridPane.columnIndex="0" GridPane.columnSpan="3" style="-fx-text-fill: #1976D2; -fx-font-weight: bold;"/>
            </GridPane>
         </VBox>

         <VBox spacing="10" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 4);">
            <Label text="ðŸ“¦ Product Selection (Manual Entry or Barcode)" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #37474F;">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Separator/>
            <GridPane hgap="15" vgap="10">
               <columnConstraints>
                  <ColumnConstraints percentWidth="15" halignment="LEFT" />
                  <ColumnConstraints percentWidth="35" hgrow="ALWAYS" />
                  <ColumnConstraints percentWidth="15" halignment="LEFT" />
                  <ColumnConstraints percentWidth="35" hgrow="ALWAYS" />
               </columnConstraints>

               <Label text="Code/Barcode:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <HBox GridPane.rowIndex="0" GridPane.columnIndex="1" spacing="5" GridPane.columnSpan="3">
                  <TextField fx:id="txtBarcode" promptText="Enter Code or Scan Barcode" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" HBox.hgrow="ALWAYS"/>
                  <Button text="Load Product" onAction="#loadProduct" style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
               </HBox>

               <Label text="Description:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtDescription" promptText="Product Description" editable="true" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

               <Label text="Price (Net):" GridPane.rowIndex="1" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtShowPrice" promptText="Net Price" editable="true" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="1" GridPane.columnIndex="3"/>

               <Label text="Stock:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtQtyOnHand" promptText="Qty On Hand" editable="false" style="-fx-background-color: #EEEEEE;" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

               <Label text="Selling Price (Gross):" GridPane.rowIndex="2" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtSellingPrice" promptText="Selling Price" editable="true" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="2" GridPane.columnIndex="3"/>

               <Label text="Qty:" GridPane.rowIndex="3" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtQty" promptText="Quantity" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

               <Label text="Discount:" GridPane.rowIndex="3" GridPane.columnIndex="2" style="-fx-font-weight: bold;"/>
               <TextField fx:id="txtDiscount" promptText="Item Discount (optional)" style="-fx-background-color: #f0f0f0; -fx-border-color: #CFD8DC; -fx-border-radius: 4;" GridPane.rowIndex="3" GridPane.columnIndex="3"/>
            </GridPane>
            <HBox alignment="CENTER_RIGHT">
               <Button text="ðŸ›’ Add to Cart" onAction="#addToCart" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20; -fx-font-size: 14px; -fx-cursor: hand;"/>
            </HBox>
         </VBox>

         <TableView fx:id="tblCart" VBox.vgrow="ALWAYS" prefHeight="350" style="-fx-background-color: #ffffff; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 4);">
            <columns>
               <TableColumn fx:id="colCode" text="Code" prefWidth="90"/>
               <TableColumn fx:id="colDesc" text="Description" prefWidth="250"/>
               <TableColumn fx:id="colSelPrice" text="Unit Price" prefWidth="100"/>
               <TableColumn fx:id="colSelDisc" text="Disc." prefWidth="70"/>
               <TableColumn fx:id="colSelShPrice" text="Net Price" prefWidth="100"/>
               <TableColumn fx:id="colSelQty" text="Qty" prefWidth="60"/>
               <TableColumn fx:id="colSelTotal" text="Total" prefWidth="120"/>
               <TableColumn fx:id="colSelOperation" text="Action" prefWidth="80"/>
            </columns>
            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
         </TableView>
      </VBox>

      <VBox prefWidth="350" spacing="20">

         <VBox spacing="10" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 4);">
            <Label text="ðŸ§¾ Order Summary" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #37474F;">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Separator/>
            <GridPane hgap="10" vgap="10">
               <Label text="Sub Total:" style="-fx-font-size: 14px;" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
               <Label fx:id="lblSubTotal" text="0.00 /=" style="-fx-font-size: 14px;" GridPane.rowIndex="0" GridPane.columnIndex="1" alignment="CENTER_RIGHT"/>

               <Label text="Total Discount:" style="-fx-font-size: 14px;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
               <Label fx:id="lblTotalDiscount" text="0.00 /=" style="-fx-font-size: 14px; -fx-text-fill: #D32F2F;" GridPane.rowIndex="1" GridPane.columnIndex="1" alignment="CENTER_RIGHT"/>

               <Label text="Tax (10%):" style="-fx-font-size: 14px;" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
               <Label fx:id="lblTax" text="0.00 /=" style="-fx-font-size: 14px;" GridPane.rowIndex="2" GridPane.columnIndex="1" alignment="CENTER_RIGHT"/>

               <Separator GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.columnSpan="2"/>

               <Label text="GRAND TOTAL:" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #00796B;" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
               <Label fx:id="txtTotal" text="0.00 /=" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #00796B;" GridPane.rowIndex="4" GridPane.columnIndex="1" alignment="CENTER_RIGHT"/>

               <columnConstraints>
                  <ColumnConstraints percentWidth="60"/>
                  <ColumnConstraints percentWidth="40"/>
               </columnConstraints>
            </GridPane>
         </VBox>

         <VBox VBox.vgrow="ALWAYS" spacing="15" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 4);">
            <Label text="ðŸ’³ Payment Options" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #37474F;"/>
            <Separator/>

            <Label text="Payment Method:" style="-fx-font-weight: bold;"/>
            <ComboBox fx:id="cmbPaymentMethod" promptText="Select Payment Type" style="-fx-pref-width: 300;" maxWidth="Infinity">
               <items>
                  <FXCollections fx:factory="observableArrayList">
                     <String fx:value="Cash" />
                     <String fx:value="Credit" />
                     <String fx:value="Cheque" />
                  </FXCollections>
               </items>
            </ComboBox>

            <Button text="âœ… COMPLETE ORDER (F1)" onAction="#btnCompleteOrder" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 18px; -fx-pref-height: 50; -fx-cursor: hand;" maxWidth="Infinity"/>

            <Button text="ðŸ”™ Back to Dashboard" onAction="#btnBackToHomeOnAction"
                    style="-fx-background-color: transparent;
                               -fx-text-fill: #1976D2;
                               -fx-font-weight: bold;
                               -fx-padding: 0;
                               -fx-border-color: transparent;
                               -fx-font-size: 14px;
                               -fx-underline: true;
                               -fx-cursor: hand;"
                    maxWidth="Infinity" alignment="CENTER_RIGHT"/>

            <Region VBox.vgrow="ALWAYS"/>

            <Label text="Current User: John Doe (Cashier)" style="-fx-font-size: 12px; -fx-text-fill: #78909C;" alignment="CENTER" maxWidth="Infinity"/>
         </VBox>
      </VBox>
   </HBox>
</AnchorPane>