<?xml version="1.0" encoding="UTF-8"?>

<?import com.jfoenix.controls.JFXButton?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="context" styleClass="background-modern" xmlns="http://javafx.com/javafx/20.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.devstack.pos.controller.AnalysisPageController" stylesheets="@styles/pos-styles.css">
   <children>
      <!-- Header Bar -->
      <VBox styleClass="header-bar" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="12">

               <Text styleClass="header-title" text="ðŸ“Š Advanced Reports &amp; Analytics">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Text>
               <Region HBox.hgrow="ALWAYS" />
               <JFXButton onAction="#btnBackToDashboard" text="Back to Dashboard" buttonType="RAISED" styleClass="btn-secondary" prefWidth="160">
                  <font>
                     <Font name="System Bold" size="13.0" />
                  </font>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </JFXButton>
            </HBox>
         </children>
      </VBox>
      
      <!-- Main Content with ScrollPane -->
      <ScrollPane fitToWidth="true" AnchorPane.topAnchor="72" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.bottomAnchor="0">
         <VBox spacing="24" style="-fx-padding: 32;">
            
            <!-- Date Range Filter -->
            <HBox spacing="16" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">
               <Text text="ðŸ“… Filter By Date Range" style="-fx-font-size: 16; -fx-font-weight: bold;">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Text>
               <Region HBox.hgrow="ALWAYS" />
               <VBox spacing="4" alignment="CENTER_LEFT">
                  <Text text="From:" style="-fx-font-size: 12;">
                     <font>
                        <Font name="System" size="12.0" />
                     </font>
                  </Text>
                  <DatePicker fx:id="dateFrom" prefWidth="150" />
               </VBox>
               <VBox spacing="4" alignment="CENTER_LEFT">
                  <Text text="To:" style="-fx-font-size: 12;">
                     <font>
                        <Font name="System" size="12.0" />
                     </font>
                  </Text>
                  <DatePicker fx:id="dateTo" prefWidth="150" />
               </VBox>
               <JFXButton onAction="#applyDateFilter" text="Apply Filter" buttonType="RAISED" styleClass="btn-success">
                  <font>
                     <Font name="System Bold" size="13.0" />
                  </font>
                  <cursor>
                     <Cursor fx:constant="HAND" />
                  </cursor>
               </JFXButton>
            </HBox>
            
            <!-- Statistics Cards -->
            <GridPane hgap="20" vgap="20">
               <columnConstraints>
                  <ColumnConstraints percentWidth="25" />
                  <ColumnConstraints percentWidth="25" />
                  <ColumnConstraints percentWidth="25" />
                  <ColumnConstraints percentWidth="25" />
               </columnConstraints>
               
               <!-- Total Revenue Card -->
               <VBox GridPane.columnIndex="0" styleClass="stat-card" spacing="8" style="-fx-background-color: #4CAF50; -fx-background-radius: 10; -fx-padding: 20;">
                  <Text text="ðŸ’° Total Revenue" style="-fx-fill: white; -fx-font-size: 14;">
                     <font>
                        <Font name="System" size="14.0" />
                     </font>
                  </Text>
                  <Text fx:id="lblTotalRevenue" text="0.00 /=" style="-fx-fill: white; -fx-font-weight: bold; -fx-font-size: 24;">
                     <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Text>
            </VBox>
            
            <!-- Total Orders Card -->
               <VBox GridPane.columnIndex="1" styleClass="stat-card" spacing="8" style="-fx-background-color: #2196F3; -fx-background-radius: 10; -fx-padding: 20;">
                  <Text text="ðŸ›’ Total Orders" style="-fx-fill: white; -fx-font-size: 14;">
                  <font>
                     <Font name="System" size="14.0" />
                  </font>
               </Text>
               <Text fx:id="lblTotalOrders" text="0" style="-fx-fill: white; -fx-font-weight: bold; -fx-font-size: 24;">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Text>
            </VBox>
               
               <!-- Total Profit Card -->
               <VBox GridPane.columnIndex="2" styleClass="stat-card" spacing="8" style="-fx-background-color: #FF9800; -fx-background-radius: 10; -fx-padding: 20;">
                  <Text text="ðŸ“ˆ Total Profit" style="-fx-fill: white; -fx-font-size: 14;">
                     <font>
                        <Font name="System" size="14.0" />
                     </font>
                  </Text>
                  <Text fx:id="lblTotalProfit" text="0.00 /=" style="-fx-fill: white; -fx-font-weight: bold; -fx-font-size: 24;">
                     <font>
                        <Font name="System Bold" size="24.0" />
                     </font>
                  </Text>
               </VBox>
            
            <!-- Average Order Value Card -->
               <VBox GridPane.columnIndex="3" styleClass="stat-card" spacing="8" style="-fx-background-color: #9C27B0; -fx-background-radius: 10; -fx-padding: 20;">
                  <Text text="ðŸ’µ Avg Order Value" style="-fx-fill: white; -fx-font-size: 14;">
                  <font>
                     <Font name="System" size="14.0" />
                  </font>
               </Text>
               <Text fx:id="lblAvgOrderValue" text="0.00 /=" style="-fx-fill: white; -fx-font-weight: bold; -fx-font-size: 24;">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Text>
            </VBox>
            </GridPane>
            
            <!-- Report Tabs -->
            <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: white; -fx-background-radius: 10;">
               
               <!-- Tab 1: Sales Reports -->
               <Tab text="ðŸ“Š Sales Reports">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <JFXButton onAction="#loadWeeklySales" text="Week" buttonType="RAISED" styleClass="btn-primary" prefWidth="100">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                        </JFXButton>
                        <JFXButton onAction="#loadMonthlySales" text="Month" buttonType="RAISED" styleClass="btn-primary" prefWidth="100">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                        </JFXButton>
                        <JFXButton onAction="#loadYearlySales" text="Year" buttonType="RAISED" styleClass="btn-primary" prefWidth="100">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                        </JFXButton>
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadSalesReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <TableView fx:id="tblSalesReports" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="colSalesPeriod" prefWidth="180.0" text="Period" />
                           <TableColumn fx:id="colSalesOrders" prefWidth="100.0" text="Orders" />
                           <TableColumn fx:id="colSalesRevenue" prefWidth="150.0" text="Revenue" />
                           <TableColumn fx:id="colSalesRefunds" prefWidth="130.0" text="Refunds" />
                           <TableColumn fx:id="colSalesNetRevenue" prefWidth="150.0" text="Net Revenue" />
                           <TableColumn fx:id="colSalesAvgOrder" prefWidth="130.0" text="Avg Order" />
                           <TableColumn fx:id="colSalesProfit" prefWidth="150.0" text="Profit" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
               <!-- Tab 2: Top Selling Products -->
               <Tab text="ðŸ† Top Selling Products">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadSalesReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <TableView fx:id="tblTopProducts" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="colProductRank" prefWidth="60.0" text="Rank" />
                           <TableColumn fx:id="colProductName" prefWidth="250.0" text="Product" />
                           <TableColumn fx:id="colProductQtySold" prefWidth="100.0" text="Qty Sold" />
                           <TableColumn fx:id="colProductReturns" prefWidth="100.0" text="Returns" />
                           <TableColumn fx:id="colProductNetQty" prefWidth="100.0" text="Net Qty" />
                           <TableColumn fx:id="colProductRevenue" prefWidth="130.0" text="Revenue" />
                           <TableColumn fx:id="colProductRefunds" prefWidth="120.0" text="Refunds" />
                           <TableColumn fx:id="colProductNetRevenue" prefWidth="130.0" text="Net Revenue" />
                           <TableColumn fx:id="colProductAvgPrice" prefWidth="120.0" text="Avg Price" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
               <!-- Tab 3: Sales by Category -->
               <Tab text="ðŸ“¦ Sales by Category">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadSalesReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <TableView fx:id="tblSalesByCategory" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="colCategoryName" prefWidth="250.0" text="Product Category" />
                           <TableColumn fx:id="colCategoryOrders" prefWidth="100.0" text="Orders" />
                           <TableColumn fx:id="colCategoryRevenue" prefWidth="130.0" text="Revenue" />
                           <TableColumn fx:id="colCategoryRefunds" prefWidth="120.0" text="Refunds" />
                           <TableColumn fx:id="colCategoryNetRevenue" prefWidth="130.0" text="Net Revenue" />
                           <TableColumn fx:id="colCategoryAvgOrder" prefWidth="120.0" text="Avg Order" />
                           <TableColumn fx:id="colCategoryProfit" prefWidth="130.0" text="Profit" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
               <!-- Tab 4: Sales by Cashier -->
               <Tab text="ðŸ‘¤ Sales by Cashier/User">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadSalesReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <TableView fx:id="tblSalesByCashier" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="colCashierRank" prefWidth="60.0" text="Rank" />
                           <TableColumn fx:id="colCashierName" prefWidth="200.0" text="Cashier" />
                           <TableColumn fx:id="colCashierOrders" prefWidth="100.0" text="Orders" />
                           <TableColumn fx:id="colCashierRevenue" prefWidth="130.0" text="Revenue" />
                           <TableColumn fx:id="colCashierRefunds" prefWidth="120.0" text="Refunds" />
                           <TableColumn fx:id="colCashierNetRevenue" prefWidth="130.0" text="Net Revenue" />
                           <TableColumn fx:id="colCashierAvgOrder" prefWidth="120.0" text="Avg Order" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
               <!-- Tab 5: Profit & Loss -->
               <Tab text="ðŸ’¹ Profit &amp; Loss Report">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadFinancialReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <GridPane hgap="20" vgap="16">
                        <columnConstraints>
                           <ColumnConstraints percentWidth="50" />
                           <ColumnConstraints percentWidth="50" />
                        </columnConstraints>
                        
                        <VBox GridPane.columnIndex="0" spacing="12" style="-fx-background-color: #e8f5e9; -fx-padding: 20; -fx-background-radius: 8;">
                           <Text text="Revenue Breakdown" style="-fx-font-size: 16; -fx-font-weight: bold;">
                              <font>
                                 <Font name="System Bold" size="16.0" />
                              </font>
                           </Text>
                           <HBox>
                              <Text text="Total Sales: " style="-fx-font-size: 14;" />
                              <Text fx:id="lblPLTotalSales" text="0.00 /=" style="-fx-font-size: 14; -fx-font-weight: bold;" />
                           </HBox>
                           <HBox>
                              <Text text="Cost of Goods: " style="-fx-font-size: 14;" />
                              <Text fx:id="lblPLCostOfGoods" text="0.00 /=" style="-fx-font-size: 14; -fx-font-weight: bold;" />
         </HBox>
                        </VBox>
         
                        <VBox GridPane.columnIndex="1" spacing="12" style="-fx-background-color: #fff3e0; -fx-padding: 20; -fx-background-radius: 8;">
                           <Text text="Profit Summary" style="-fx-font-size: 16; -fx-font-weight: bold;">
               <font>
                                 <Font name="System Bold" size="16.0" />
               </font>
            </Text>
                           <HBox>
                              <Text text="Gross Profit: " style="-fx-font-size: 14;" />
                              <Text fx:id="lblPLGrossProfit" text="0.00 /=" style="-fx-font-size: 14; -fx-font-weight: bold;" />
                           </HBox>
                           <HBox>
                              <Text text="Profit Margin: " style="-fx-font-size: 14;" />
                              <Text fx:id="lblPLProfitMargin" text="0.00%" style="-fx-font-size: 14; -fx-font-weight: bold;" />
                           </HBox>
                        </VBox>
                     </GridPane>
                     
                     <TableView fx:id="tblProfitLoss" prefHeight="250.0">
               <columns>
                           <TableColumn fx:id="colPLProduct" prefWidth="300.0" text="Product" />
                           <TableColumn fx:id="colPLQtySold" prefWidth="120.0" text="Qty Sold" />
                           <TableColumn fx:id="colPLCost" prefWidth="150.0" text="Cost" />
                           <TableColumn fx:id="colPLRevenue" prefWidth="150.0" text="Revenue" />
                           <TableColumn fx:id="colPLProfit" prefWidth="150.0" text="Profit" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
               <!-- Tab 6: Top Customers -->
               <Tab text="â­ Top Customers">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#downloadSalesReportPDF" text="ðŸ“¥ Download PDF" buttonType="RAISED" styleClass="btn-success" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     <TableView fx:id="tblTopCustomers" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="colCustomerRank" prefWidth="60.0" text="Rank" />
                           <TableColumn fx:id="colCustomerEmail" prefWidth="200.0" text="Customer Name" />
                           <TableColumn fx:id="colCustomerOrders" prefWidth="100.0" text="Orders" />
                           <TableColumn fx:id="colCustomerRevenue" prefWidth="130.0" text="Revenue" />
                           <TableColumn fx:id="colCustomerRefunds" prefWidth="120.0" text="Refunds" />
                           <TableColumn fx:id="colCustomerNetRevenue" prefWidth="130.0" text="Net Revenue" />
                           <TableColumn fx:id="colCustomerAvgOrder" prefWidth="120.0" text="Avg Order" />
                           <TableColumn fx:id="colCustomerPendingPayments" prefWidth="130.0" text="Pending Payments" />
               </columns>
            </TableView>
         </VBox>
               </Tab>
               
               <!-- Tab 7: Customer Purchase History Analysis -->
               <Tab text="ðŸ‘¤ Customer Purchase History">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Text text="Select Customer:" style="-fx-font-size: 14; -fx-font-weight: bold;">
                           <font>
                              <Font name="System Bold" size="14.0" />
                           </font>
                        </Text>
                        <ComboBox fx:id="cmbCustomerHistory" prefWidth="300" promptText="Select Customer..." />
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#loadCustomerHistory" text="Load History" buttonType="RAISED" styleClass="btn-primary" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     
                     <!-- Customer Summary Statistics -->
                     <GridPane hgap="20" vgap="16">
                        <columnConstraints>
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                        </columnConstraints>
                        
                        <VBox GridPane.columnIndex="0" spacing="8" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Total Orders" style="-fx-font-size: 12;" />
                           <Text fx:id="lblCustomerTotalOrders" text="0" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="1" spacing="8" style="-fx-background-color: #e8f5e9; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Total Spent" style="-fx-font-size: 12;" />
                           <Text fx:id="lblCustomerTotalSpent" text="0.00 /=" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="2" spacing="8" style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Avg Order Value" style="-fx-font-size: 12;" />
                           <Text fx:id="lblCustomerAvgOrder" text="0.00 /=" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="3" spacing="8" style="-fx-background-color: #fce4ec; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Last Purchase" style="-fx-font-size: 12;" />
                           <Text fx:id="lblCustomerLastPurchase" text="N/A" style="-fx-font-size: 14; -fx-font-weight: bold;" />
                        </VBox>
                     </GridPane>
                     
                     <!-- Purchase History Table -->
                     <Text text="Purchase History" style="-fx-font-size: 16; -fx-font-weight: bold;">
                        <font>
                           <Font name="System Bold" size="16.0" />
                        </font>
                     </Text>
                     <TableView fx:id="tblCustomerHistory" prefHeight="200.0">
                        <columns>
                           <TableColumn fx:id="colHistoryOrderId" prefWidth="100.0" text="Order ID" />
                           <TableColumn fx:id="colHistoryDate" prefWidth="150.0" text="Date" />
                           <TableColumn fx:id="colHistoryAmount" prefWidth="120.0" text="Amount" />
                           <TableColumn fx:id="colHistoryPaymentMethod" prefWidth="120.0" text="Payment Method" />
                           <TableColumn fx:id="colHistoryPaymentStatus" prefWidth="120.0" text="Payment Status" />
                        </columns>
                     </TableView>
                     
                     <!-- Favorite Products & Categories -->
                     <HBox spacing="20">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                           <Text text="Favorite Products" style="-fx-font-size: 14; -fx-font-weight: bold;">
                              <font>
                                 <Font name="System Bold" size="14.0" />
                              </font>
                           </Text>
                           <TableView fx:id="tblCustomerFavoriteProducts" prefHeight="150.0">
                              <columns>
                                 <TableColumn fx:id="colFavProductName" prefWidth="200.0" text="Product" />
                                 <TableColumn fx:id="colFavProductQty" prefWidth="100.0" text="Qty" />
                                 <TableColumn fx:id="colFavProductRevenue" prefWidth="120.0" text="Revenue" />
                              </columns>
                           </TableView>
                        </VBox>
                        
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                           <Text text="Favorite Categories" style="-fx-font-size: 14; -fx-font-weight: bold;">
                              <font>
                                 <Font name="System Bold" size="14.0" />
                              </font>
                           </Text>
                           <TableView fx:id="tblCustomerFavoriteCategories" prefHeight="150.0">
                              <columns>
                                 <TableColumn fx:id="colFavCategoryName" prefWidth="200.0" text="Category" />
                                 <TableColumn fx:id="colFavCategoryQty" prefWidth="100.0" text="Qty" />
                                 <TableColumn fx:id="colFavCategoryRevenue" prefWidth="120.0" text="Revenue" />
                              </columns>
                           </TableView>
                        </VBox>
                     </HBox>
                  </VBox>
               </Tab>
               
               <!-- Tab 9: Product Performance Analytics -->
               <Tab text="ðŸ“¦ Product Performance">
                  <VBox spacing="16" style="-fx-padding: 20;">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Text text="Select Product:" style="-fx-font-size: 14; -fx-font-weight: bold;">
                           <font>
                              <Font name="System Bold" size="14.0" />
                           </font>
                        </Text>
                        <ComboBox fx:id="cmbProductPerformance" prefWidth="300" promptText="Select Product..." />
                        <Region HBox.hgrow="ALWAYS" />
                        <JFXButton onAction="#loadProductPerformance" text="Load Analytics" buttonType="RAISED" styleClass="btn-primary" prefWidth="150">
                           <font>
                              <Font name="System Bold" size="12.0" />
                           </font>
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                        </JFXButton>
                     </HBox>
                     
                     <!-- Product Performance Summary Statistics -->
                     <GridPane hgap="20" vgap="16">
                        <columnConstraints>
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                           <ColumnConstraints percentWidth="25" />
                        </columnConstraints>
                        
                        <VBox GridPane.columnIndex="0" spacing="8" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Total Sold" style="-fx-font-size: 12;" />
                           <Text fx:id="lblProductTotalSold" text="0" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="1" spacing="8" style="-fx-background-color: #e8f5e9; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Total Revenue" style="-fx-font-size: 12;" />
                           <Text fx:id="lblProductTotalRevenue" text="0.00 /=" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="2" spacing="8" style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Unique Customers" style="-fx-font-size: 12;" />
                           <Text fx:id="lblProductUniqueCustomers" text="0" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                        
                        <VBox GridPane.columnIndex="3" spacing="8" style="-fx-background-color: #fce4ec; -fx-padding: 15; -fx-background-radius: 8;">
                           <Text text="Avg Qty/Order" style="-fx-font-size: 12;" />
                           <Text fx:id="lblProductAvgQty" text="0.00" style="-fx-font-size: 18; -fx-font-weight: bold;" />
                        </VBox>
                     </GridPane>
                     
                     <!-- Sales History Table -->
                     <Text text="Sales History" style="-fx-font-size: 16; -fx-font-weight: bold;">
                        <font>
                           <Font name="System Bold" size="16.0" />
                        </font>
                     </Text>
                     <TableView fx:id="tblProductSalesHistory" prefHeight="200.0">
                        <columns>
                           <TableColumn fx:id="colProductOrderId" prefWidth="100.0" text="Order ID" />
                           <TableColumn fx:id="colProductSaleDate" prefWidth="150.0" text="Date" />
                           <TableColumn fx:id="colProductQty" prefWidth="100.0" text="Quantity" />
                           <TableColumn fx:id="colProductRevenue" prefWidth="120.0" text="Revenue" />
                        </columns>
                     </TableView>
                     
                     <!-- Sales Trend Table -->
                     <Text text="Sales Trend (Daily)" style="-fx-font-size: 16; -fx-font-weight: bold;">
                        <font>
                           <Font name="System Bold" size="16.0" />
                        </font>
                     </Text>
                     <TableView fx:id="tblProductSalesTrend" prefHeight="200.0">
                        <columns>
                           <TableColumn fx:id="colTrendDate" prefWidth="150.0" text="Date" />
                           <TableColumn fx:id="colTrendQty" prefWidth="120.0" text="Daily Qty" />
                           <TableColumn fx:id="colTrendRevenue" prefWidth="150.0" text="Daily Revenue" />
                        </columns>
                     </TableView>
                  </VBox>
               </Tab>
               
            </TabPane>
            
      </VBox>
      </ScrollPane>
   </children>
</AnchorPane>
