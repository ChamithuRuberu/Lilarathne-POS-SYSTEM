<?xml version="1.0" encoding="UTF-8"?>

<?import com.jfoenix.controls.JFXButton?>
<?import com.jfoenix.controls.JFXTextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<AnchorPane fx:id="context" xmlns="http://javafx.com/javafx/20.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.devstack.pos.controller.CustomerFormController"
            stylesheets="@styles/customer-onboard.css"
            styleClass="background-modern">

   <children>
      <!-- Header -->
      <VBox styleClass="header-bar"
            AnchorPane.topAnchor="0"
            AnchorPane.leftAnchor="0"
            AnchorPane.rightAnchor="0">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="12">
               <padding>
                  <Insets top="20" right="20" bottom="20" left="20"/>
               </padding>
               <Text text="Customer Dashboard" styleClass="header-title"/>
               <Region HBox.hgrow="ALWAYS"/>
               <JFXButton text="Back to Home"
                          onAction="#btnBackToHomeOnAction"
                          buttonType="RAISED"
                          styleClass="btn-secondary"
                          prefWidth="140">
                  <cursor><Cursor fx:constant="HAND"/></cursor>
               </JFXButton>
            </HBox>
         </children>
      </VBox>

      <!-- Content -->
      <VBox spacing="24"
            AnchorPane.topAnchor="80"
            AnchorPane.leftAnchor="32"
            AnchorPane.rightAnchor="32"
            AnchorPane.bottomAnchor="32">

         <!-- Customer Information -->
         <VBox spacing="20">
            <Text text="Customer Information" styleClass="label-section"/>
            <GridPane hgap="20" vgap="20">
               <columnConstraints>
                  <ColumnConstraints prefWidth="300" hgrow="SOMETIMES"/>
                  <ColumnConstraints prefWidth="300" hgrow="SOMETIMES"/>
                  <ColumnConstraints prefWidth="300" hgrow="SOMETIMES"/>
               </columnConstraints>

               <VBox spacing="8" GridPane.columnIndex="0">
                  <Text text="Email" styleClass="form-label"/>
                  <JFXTextField fx:id="txtEmail" promptText="Enter email" styleClass="text-field-modern"/>
               </VBox>

               <VBox spacing="8" GridPane.columnIndex="1">
                  <Text text="Name" styleClass="form-label"/>
                  <JFXTextField fx:id="txtName" promptText="Enter name" styleClass="text-field-modern"/>
               </VBox>

               <VBox spacing="8" GridPane.columnIndex="2">
                  <Text text="Contact" styleClass="form-label"/>
                  <JFXTextField fx:id="txtContact" promptText="Enter contact" styleClass="text-field-modern"/>
               </VBox>

               <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="1">
                  <Text text="Salary" styleClass="form-label"/>
                  <JFXTextField fx:id="txtSalary" promptText="Enter salary" styleClass="text-field-modern"/>
               </VBox>

               <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="2">
                  <Text text="Search Customer" styleClass="form-label"/>
                  <HBox spacing="12" alignment="CENTER_LEFT">
                     <JFXTextField fx:id="txtSearch"
                                   promptText="Search by name or email"
                                   styleClass="text-field-modern"
                                   onAction="#searchCustomer"
                                   HBox.hgrow="ALWAYS"/>
                     <JFXButton text="Save Customer"
                                onAction="#btnSaveUpdateOnAction"
                                styleClass="btn-success"
                                prefWidth="160"/>
                     <JFXButton text="New Customer"
                                onAction="#btnNewCustomerOnAction"
                                styleClass="btn-primary"
                                prefWidth="140"/>
                  </HBox>
               </VBox>
            </GridPane>
         </VBox>

         <!-- Customer Table -->
         <VBox spacing="16">
            <HBox alignment="CENTER_LEFT" spacing="12">
               <Text text="Customer List" styleClass="label-section"/>
               <Region HBox.hgrow="ALWAYS"/>
               <JFXButton text="Manage Loyalty Cards"
                          styleClass="btn-outline"
                          prefWidth="180"/>
            </HBox>
            <TableView fx:id="tbl"
                       styleClass="table-view-modern"
                       prefHeight="320">
               <columns>
                  <TableColumn fx:id="colId" text="ID" prefWidth="80"/>
                  <TableColumn fx:id="colEmail" text="Email" prefWidth="250"/>
                  <TableColumn fx:id="colName" text="Name" prefWidth="200"/>
                  <TableColumn fx:id="colContact" text="Contact" prefWidth="180"/>
                  <TableColumn fx:id="colSalary" text="Salary" prefWidth="150"/>
                  <TableColumn fx:id="colOperate" text="Actions" prefWidth="200"/>
               </columns>
            </TableView>
         </VBox>

         <!-- Chart Section -->
         <VBox spacing="16" styleClass="chart-section">
            <padding>
               <Insets top="16" right="16" bottom="16" left="16"/>
            </padding>
            <Text text="Customer Insights" styleClass="label-section"/>
            <HBox spacing="32" alignment="CENTER">
               <PieChart fx:id="pieChart" prefWidth="400" prefHeight="300"/>
               <BarChart fx:id="barChart" prefWidth="500" prefHeight="300">
                  <xAxis>
                     <CategoryAxis label="Customer Groups"/>
                  </xAxis>
                  <yAxis>
                     <NumberAxis label="Total Sales (LKR)"/>
                  </yAxis>
               </BarChart>
            </HBox>
         </VBox>
      </VBox>
   </children>
</AnchorPane>
